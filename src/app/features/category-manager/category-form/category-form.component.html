<div class="min-h-screen bg-gray-50 pb-20">
    <!-- Header -->
    <header class="bg-white p-4 shadow-sm flex items-center gap-4 sticky top-0 z-10">
        <button (click)="onCancel()" class="material-icons text-gray-600">arrow_back</button>
        <h1 class="text-xl font-bold text-gray-800">{{ isEdit() ? 'Edit' : 'New' }} Category</h1>
        @if (isEdit()) {
        <button (click)="onDelete()" class="material-icons text-red-600 ml-auto">delete</button>
        }
    </header>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-4 space-y-6">

        <!-- Type Selector -->
        <div class="flex bg-gray-200 p-1 rounded-xl">
            <label class="flex-1 text-center py-2 rounded-lg cursor-pointer transition-all"
                [class.bg-white]="form.get('type')?.value === 'income'"
                [class.shadow-sm]="form.get('type')?.value === 'income'">
                <input type="radio" formControlName="type" value="income" class="hidden">
                <span class="font-medium" [class.text-green-600]="form.get('type')?.value === 'income'">Income</span>
            </label>
            <label class="flex-1 text-center py-2 rounded-lg cursor-pointer transition-all"
                [class.bg-white]="form.get('type')?.value === 'expense'"
                [class.shadow-sm]="form.get('type')?.value === 'expense'">
                <input type="radio" formControlName="type" value="expense" class="hidden">
                <span class="font-medium" [class.text-red-600]="form.get('type')?.value === 'expense'">Expense</span>
            </label>
        </div>

        <!-- Name -->
        <div class="bg-white p-4 rounded-xl shadow-sm">
            <label class="block text-xs text-gray-500 mb-1">Name</label>
            <input type="text" formControlName="name" placeholder="Category Name"
                class="w-full text-lg font-medium text-gray-800 outline-none placeholder-gray-300 border-b border-transparent focus:border-blue-500 transition-colors">
        </div>

        <!-- Icon Selector -->
        <div class="bg-white p-4 rounded-xl shadow-sm">
            <label class="block text-xs text-gray-500 mb-3">Icon</label>
            <div class="grid grid-cols-6 gap-4 max-h-48 overflow-y-auto p-1">
                @for (icon of icons; track icon) {
                <label class="flex items-center justify-center cursor-pointer group">
                    <input type="radio" formControlName="icon" [value]="icon" class="hidden peer">
                    <div
                        class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center peer-checked:bg-blue-600 peer-checked:text-white transition-colors hover:bg-gray-200">
                        <span class="material-icons text-sm">{{ icon }}</span>
                    </div>
                </label>
                }
            </div>
        </div>

        <!-- Color Selector -->
        <div class="bg-white p-4 rounded-xl shadow-sm">
            <label class="block text-xs text-gray-500 mb-3">Color</label>
            <div class="grid grid-cols-8 gap-3">
                @for (color of colors; track color) {
                <label class="flex items-center justify-center cursor-pointer">
                    <input type="radio" formControlName="color" [value]="color" class="hidden peer">
                    <div class="w-8 h-8 rounded-full border-2 border-transparent peer-checked:border-gray-800 transition-all"
                        [style.background-color]="color"></div>
                </label>
                }
            </div>
        </div>

        <!-- Preview -->
        <div class="flex justify-center py-4">
            <div class="flex items-center gap-3 bg-white p-3 rounded-xl shadow-sm w-full max-w-xs">
                <div class="w-10 h-10 rounded-full flex items-center justify-center text-white"
                    [style.background-color]="form.get('color')?.value">
                    <span class="material-icons text-sm">{{ form.get('icon')?.value }}</span>
                </div>
                <span class="font-medium text-gray-800">{{ form.get('name')?.value || 'Category Name' }}</span>
            </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" [disabled]="form.invalid"
            class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:shadow-none hover:bg-blue-700 transition-all active:scale-95">
            {{ isEdit() ? 'Update' : 'Create' }} Category
        </button>
    </form>
</div>